<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글" /><meta property="og:locale" content="ko" /><meta name="description" content="Before Start." /><meta property="og:description" content="Before Start." /><link rel="canonical" href="https://petabyte.studio/posts/learn-bloc-like-eating-cake/" /><meta property="og:url" content="https://petabyte.studio/posts/learn-bloc-like-eating-cake/" /><meta property="og:site_name" content="dev.appmin" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-02-19T20:50:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글","dateModified":"2022-03-22T22:05:55+09:00","datePublished":"2022-02-19T20:50:00+09:00","description":"Before Start.","url":"https://petabyte.studio/posts/learn-bloc-like-eating-cake/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://petabyte.studio/posts/learn-bloc-like-eating-cake/"},"@context":"https://schema.org"}</script><title>[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글 | dev.appmin</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="dev.appmin"><meta name="application-name" content="dev.appmin"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/4322099?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">dev.appmin</a></div><div class="site-subtitle font-italic">응애 개발자</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/devappmin" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dev.appmin','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/devappmin">Kim Seung Hwan</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2022-02-19 20:50:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Sat, Feb 19, 2022, 8:50 PM +0900" >Feb 19, 2022</em> </span> <span> Updated <em class="timeago" date="2022-03-22 22:05:55 +0900 " data-toggle="tooltip" data-placement="bottom" title="Tue, Mar 22, 2022, 10:05 PM +0900" >Mar 22, 2022</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4637 words"> <em>25 min</em> read</span></div></div></div><div class="post-content"><h2 id="before-start">Before Start.<a href="#before-start" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p><img title="" data-src="/assets/uploads/2022-02-19/1.png" alt="BLoC Logo" width="191" data-proofer-ignore></p><p>이 포스트에서는 BLoC 패턴을 이해하기 어려운 개발자 분들에게 매우 쉽게 BLoC을 풀어서 설명하려고 합니다.</p><h3 id="그래서-bloc-패턴이-도대체-뭐야">그래서 BLoC 패턴이 도대체 뭐야?<a href="#그래서-bloc-패턴이-도대체-뭐야" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">BLoC</code>은 <code class="language-plaintext highlighter-rouge">Business Logic Component</code>로 구글 개발자가 개발한 상태관리 아키텍처 패턴입니다.</p><p>이 부분은 다른 블로그에서 쉽게 찾아볼 수 있으므로 길게 설명하지 않겠습니다.</p><h3 id="bloc-패턴을-써야하는-이유">BLoC 패턴을 써야하는 이유<a href="#bloc-패턴을-써야하는-이유" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>솔직히 크기가 작은 앱을 개발하다보면 아키텍처 패턴과 상태관리가 별로 중요한 것처럼 느껴지지 않습니다.</p><p>하지만 개발하는 앱의 사이즈가 커질수록 아키텍처 패턴과 상태관리는 매우 중요한 부분 중 한 곳을 차지하며 보다 멋있는 개발자가 되기 위해서는 꼭 필요한 요소 중 하나라고 생각합니다.</p><p>또한 비즈니스 로직과 UI를 분리했기 때문에 코드가 상당히 깔끔해지고 보기 좋아집니다.</p><h3 id="이번-포스트에서-만들어-볼-프로젝트">이번 포스트에서 만들어 볼 프로젝트<a href="#이번-포스트에서-만들어-볼-프로젝트" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>BLoC 패턴을 통해서 <code class="language-plaintext highlighter-rouge">pub.dev</code>에 올라온 패키지들을 크롤링하여 리스트로 출력하는 프로젝트를 만들어보겠습니다.</p><h3 id="references">References<a href="#references" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>아래 링크에 완성된 코드를 올려놨으니 참고하시면서 보면 이해하기 훨씬 쉬울겁니다.</p><p><a href="https://github.com/devappmin/BLoC_Practice">devappmin/BLoC_Practice</a></p><h2 id="getting-started">Getting Started.<a href="#getting-started" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="bloc-패턴의-모습">BLoC 패턴의 모습<a href="#bloc-패턴의-모습" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="/assets/uploads/2022-02-19/2.png" alt="BLoC Pattern" data-proofer-ignore></p><p><code class="language-plaintext highlighter-rouge">BLoC</code>패턴은 위 그림 한 장으로 설명이 가능합니다.</p><p>쉽게 이해가 안 갈 수도 있으니 이번에 저희가 만들 <code class="language-plaintext highlighter-rouge">pub.dev</code> 크롤링 앱 개발을 예로 들어보겠습니다.</p><ol><li><p><strong>events</strong></p><ul><li>화면이 띄어졌을 때 <code class="language-plaintext highlighter-rouge">pub.dev</code>에 있는 패키지를 불러오기.<li>FAB을 눌러서 현재 패키지 리스트에다가 값 추가로 불러오기.</ul><li><p><strong>states</strong></p><ul><li>패키지가 없고 빈 상태일 때 (Empty)<li>크롤링을 통해서 값을 가져오는 중이라 로딩 중일 때 (Loading)<li>값을 성공적으로 불러왔을 때 (Loaded)<li>값을 불러오던 도중 에러가 발생했을 때 (Error)</ul><li><p><strong>request / response</strong></p><ul><li>크롤링을 하기 위해서 웹에 요청을 하고 해당 값을 불러왔을 때</ul></ol><h3 id="사용할-패키지">사용할 패키지<a href="#사용할-패키지" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>이번 프로젝트를 진행하기 위해서 사용한 패키지는 다음과 같습니다.</p><ul><li>http<li>html<li>flutter_bloc<li>equatable<li>build_runner<li>freezed<li>json_serializable</ul><h3 id="프로젝트-구조">프로젝트 구조<a href="#프로젝트-구조" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre>lib
│   main.dart
│
├───bloc
│       package_bloc.dart
│       package_event.dart
│       package_state.dart
│
├───domain
│   ├───colors
│   │       colors.dart
│   │
│   └───constant
│           pub_dev.dart
│           score_value.dart
│
├───model
│       package.dart
│       package.freezed.dart
│       package.g.dart
│
└───repository
        package_repository.dart
</pre></table></code></div></div><p>이제 차근차근 개발을 진행해보겠습니다.</p><h2 id="code-it">Code it.<a href="#code-it" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="domain">Domain<a href="#domain" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="colorscolorsdart">colors/colors.dart<a href="#colorscolorsdart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:flutter/widgets.dart'</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">ViewColors</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">Color</span> <span class="n">primaryColor</span> <span class="o">=</span> <span class="n">Color</span><span class="o">(</span><span class="mh">0xFF0175c2</span><span class="o">);</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">Color</span> <span class="n">primaryDarkColor</span> <span class="o">=</span> <span class="n">Color</span><span class="o">(</span><span class="mh">0xFF00539b</span><span class="o">);</span>

  <span class="kd">static</span> <span class="kd">const</span> <span class="n">Color</span> <span class="n">primaryTextColor</span> <span class="o">=</span> <span class="n">Color</span><span class="o">(</span><span class="mh">0xFF4A4A4A</span><span class="o">);</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="n">Color</span> <span class="n">secondaryTextColor</span> <span class="o">=</span> <span class="n">Color</span><span class="o">(</span><span class="mh">0xFF6d7278</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">colors/colors.dart</code>에는 제가 사용하고 싶은 색깔들을 저장했습니다.</p><h4 id="constantpub_devdart">constant/pub_dev.dart<a href="#constantpub_devdart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">PubDev</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="kt">String</span> <span class="n">pubDevUrl</span> <span class="o">=</span> <span class="s">'https://pub.dev/packages'</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="kt">String</span> <span class="n">packageQuery</span> <span class="o">=</span> <span class="s">'?page='</span><span class="o">;</span>

  <span class="kd">static</span> <span class="n">Uri</span> <span class="n">packageUrl</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">)</span> <span class="o">=&gt;</span>
      <span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">pubDevUrl</span> <span class="o">+</span> <span class="n">packageQuery</span> <span class="o">+</span> <span class="n">page</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">pub.dev</code>에서 크롤링하기 위해서 링크를 저장했습니다. <code class="language-plaintext highlighter-rouge">page</code> 쿼리에 따라서 페이지가 이동하기 때문에 페이지 번호를 입력 받으면 Uri를 리턴하는 함수도 하나 생성했습니다.</p><h4 id="constantscore_valuedart">constant/score_value.dart<a href="#constantscore_valuedart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">ScoreValue</span> <span class="o">{</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="kt">String</span> <span class="n">likes</span> <span class="o">=</span> <span class="s">"LIKES"</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="kt">String</span> <span class="n">pubPoints</span> <span class="o">=</span> <span class="s">"PUB POINTS"</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">const</span> <span class="kt">String</span> <span class="n">popularity</span> <span class="o">=</span> <span class="s">"POPULARITY"</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p>따봉 / pub 점수 / 인기도 스트링을 저장해놓은 클래스입니다.</p><h3 id="model">Model<a href="#model" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">Model</code>은 저희가 <code class="language-plaintext highlighter-rouge">pub.dev</code>에서 가져올 패키지에서 필요한 값을 저장할 <code class="language-plaintext highlighter-rouge">package.dart</code>를 생성했습니다.</p><h4 id="packagedart">package.dart<a href="#packagedart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:freezed_annotation/freezed_annotation.dart'</span><span class="o">;</span>

<span class="kn">part</span> <span class="s">'package.freezed.dart'</span><span class="o">;</span>
<span class="kn">part</span> <span class="s">'package.g.dart'</span><span class="o">;</span>

<span class="nd">@freezed</span>
<span class="kd">class</span> <span class="nc">Package</span> <span class="k">with</span> <span class="n">_$Package</span> <span class="o">{</span>
  <span class="kd">factory</span> <span class="n">Package</span><span class="o">({</span>
    <span class="n">required</span> <span class="kt">String</span> <span class="n">name</span><span class="o">,</span>
    <span class="n">required</span> <span class="kt">String</span> <span class="n">description</span><span class="o">,</span>
    <span class="n">required</span> <span class="kt">String</span> <span class="n">version</span><span class="o">,</span>
    <span class="n">required</span> <span class="kt">bool</span> <span class="n">nullSafety</span><span class="o">,</span>
    <span class="n">required</span> <span class="kt">int</span> <span class="n">likes</span><span class="o">,</span>
    <span class="n">required</span> <span class="kt">int</span> <span class="n">pubPoints</span><span class="o">,</span>
    <span class="n">required</span> <span class="kt">int</span> <span class="n">popularity</span><span class="o">,</span>
  <span class="o">})</span> <span class="o">=</span> <span class="n">_Package</span><span class="o">;</span>

  <span class="kd">factory</span> <span class="n">Package</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;</span> <span class="n">json</span><span class="o">)</span> <span class="o">=&gt;</span>
      <span class="n">_$PackageFromJson</span><span class="o">(</span><span class="n">json</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>패키지에서 가져올 값은 아래와 같습니다.</p><ul><li><strong>name</strong>: 패키지의 이름<li><strong>description</strong>: 패키지의 상세 내용<li><strong>version</strong>: 패키지 버전<li><strong>nullSafety</strong>: Null Safety 여부<li><strong>likes</strong>: 따봉 개수<li><strong>pubPoints</strong>: Pub 점수<li><strong>popularity</strong>: 인기도</ul><p>또한 <code class="language-plaintext highlighter-rouge">package.dart</code>는 <code class="language-plaintext highlighter-rouge">freezed</code>를 통해서 Model을 생성할 것이기 때문에 <code class="language-plaintext highlighter-rouge">with _$Package</code>를 넣어주고 <code class="language-plaintext highlighter-rouge">JSON</code>을 통해서 값을 불러올 것이기 때문에 <code class="language-plaintext highlighter-rouge">fromJson</code>을 생성합니다.</p><p>그 후에는 아래 커맨드를 통해서 <code class="language-plaintext highlighter-rouge">package.freezed.dart</code>와 <code class="language-plaintext highlighter-rouge">package.g.dart</code>를 생성합니다.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="nv">$ </span>flutter pub run build_runner build
</pre></table></code></div></div><p>이를 통해서 Model 생성을 완료하였습니다.</p><h3 id="repository">Repository<a href="#repository" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">Repository</code>는 Web에서 데이터를 가져오고 이를 처리하는 것을 담당합니다.</p><p>이번 프로젝트에서는 크롤링을 통해서 값을 가져오고 리턴하는 부분이 필요하겠네요!</p><h4 id="package_repositorydart">package_repository.dart<a href="#package_repositorydart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:bloc_practice/domain/constant/pub_dev.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:html/dom.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:html/parser.dart'</span> <span class="k">as</span> <span class="n">parser</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:http/http.dart'</span> <span class="k">as</span> <span class="n">http</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">PackageRepository</span> <span class="o">{</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;&gt;&gt;</span> <span class="n">getPackages</span><span class="o">(</span><span class="kt">int</span> <span class="n">page</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="c1">// Get the packages list with the given page number on pub.dev</span>
    <span class="kd">final</span> <span class="n">response</span> <span class="o">=</span> <span class="n">await</span> <span class="n">http</span><span class="o">.</span><span class="na">get</span><span class="o">(</span>
      <span class="n">PubDev</span><span class="o">.</span><span class="na">packageUrl</span><span class="o">(</span><span class="n">page</span><span class="o">),</span>
      <span class="nl">headers:</span> <span class="o">{</span>
        <span class="s">'Accept'</span><span class="o">:</span> <span class="s">'application/json'</span><span class="o">,</span>
      <span class="o">},</span>
    <span class="o">);</span>

    <span class="c1">// Check if the response is successful</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">statusCode</span> <span class="o">==</span> <span class="mi">200</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Document</span> <span class="n">document</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">response</span><span class="o">.</span><span class="na">body</span><span class="o">);</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">Element</span><span class="o">&gt;</span> <span class="n">packageElements</span> <span class="o">=</span>
          <span class="n">document</span><span class="o">.</span><span class="na">querySelectorAll</span><span class="o">(</span><span class="s">'.packages-item'</span><span class="o">);</span>

      <span class="n">List</span><span class="o">&lt;</span><span class="n">Map</span><span class="o">&lt;</span><span class="kt">String</span><span class="o">,</span> <span class="kd">dynamic</span><span class="o">&gt;&gt;</span> <span class="n">packages</span> <span class="o">=</span> <span class="o">[];</span>

      <span class="k">for</span> <span class="o">(</span><span class="kd">var</span> <span class="n">pkgs</span> <span class="k">in</span> <span class="n">packageElements</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Element</span><span class="o">?</span> <span class="n">name</span> <span class="o">=</span> <span class="n">pkgs</span><span class="o">.</span><span class="na">querySelector</span><span class="o">(</span><span class="s">'.packages-title'</span><span class="o">);</span>
        <span class="n">Element</span><span class="o">?</span> <span class="n">description</span> <span class="o">=</span> <span class="n">pkgs</span><span class="o">.</span><span class="na">querySelector</span><span class="o">(</span><span class="s">'.packages-description'</span><span class="o">);</span>
        <span class="n">Element</span><span class="o">?</span> <span class="n">version</span> <span class="o">=</span> <span class="n">pkgs</span><span class="o">.</span><span class="na">querySelector</span><span class="o">(</span><span class="s">'.packages-metadata-block'</span><span class="o">);</span>
        <span class="n">Element</span><span class="o">?</span> <span class="n">nullSafety</span> <span class="o">=</span> <span class="n">pkgs</span><span class="o">.</span><span class="na">querySelector</span><span class="o">(</span><span class="s">'.package-badge'</span><span class="o">);</span>
        <span class="n">Element</span><span class="o">?</span> <span class="n">likes</span> <span class="o">=</span> <span class="n">pkgs</span>
            <span class="o">.</span><span class="na">querySelector</span><span class="o">(</span><span class="s">'.packages-score-like .packages-score-value-number'</span><span class="o">);</span>
        <span class="n">Element</span><span class="o">?</span> <span class="n">pubPoints</span> <span class="o">=</span> <span class="n">pkgs</span><span class="o">.</span><span class="na">querySelector</span><span class="o">(</span>
            <span class="s">'.packages-score-health .packages-score-value-number'</span><span class="o">);</span>
        <span class="n">Element</span><span class="o">?</span> <span class="n">popularity</span> <span class="o">=</span> <span class="n">pkgs</span><span class="o">.</span><span class="na">querySelector</span><span class="o">(</span>
            <span class="s">'.packages-score-popularity .packages-score-value-number'</span><span class="o">);</span>

        <span class="n">packages</span><span class="o">.</span><span class="na">add</span><span class="o">({</span>
          <span class="s">'name'</span><span class="o">:</span> <span class="n">name</span><span class="o">?.</span><span class="na">text</span><span class="o">,</span>
          <span class="s">'description'</span><span class="o">:</span> <span class="n">description</span><span class="o">?.</span><span class="na">text</span><span class="o">,</span>
          <span class="s">'version'</span><span class="o">:</span> <span class="n">version</span><span class="o">?.</span><span class="na">text</span><span class="o">,</span>
          <span class="s">'nullSafety'</span><span class="o">:</span> <span class="n">nullSafety</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="kc">true</span><span class="o">,</span>
          <span class="s">'likes'</span><span class="o">:</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">likes</span><span class="o">?.</span><span class="na">text</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">??</span> <span class="s">'0'</span><span class="o">),</span>
          <span class="s">'pubPoints'</span><span class="o">:</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">pubPoints</span><span class="o">?.</span><span class="na">text</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">??</span> <span class="s">'0'</span><span class="o">),</span>
          <span class="s">'popularity'</span><span class="o">:</span> <span class="kt">int</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">popularity</span><span class="o">?.</span><span class="na">text</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">??</span> <span class="s">'0'</span><span class="o">),</span>
        <span class="o">});</span>
      <span class="o">}</span>

      <span class="k">return</span> <span class="n">packages</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="c1">// If the response is not successful, throw an error</span>
      <span class="k">throw</span> <span class="n">Exception</span><span class="o">(</span><span class="s">'Failed to load packages'</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">pub.dev</code>에서 크롤링을 하고 가져온 패키지들을 리턴하는 함수입니다. 오늘은 크롤링이 아니라 <code class="language-plaintext highlighter-rouge">BLoC</code>을 배우는 것이 목적이므로 간단하게 설명하겠습니다.</p><p><code class="language-plaintext highlighter-rouge">http</code>를 통해서 <code class="language-plaintext highlighter-rouge">pub.dev</code>에 요청을 보냅니다. 그 후, <code class="language-plaintext highlighter-rouge">parser.parse</code>를 통해서 파싱을 한 다음에 패키지 리스트에 값을 저장하고 이를 리턴합니다.</p><h3 id="bloc">BLoC<a href="#bloc" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><code class="language-plaintext highlighter-rouge">BLoC</code> 아키텍처는 기본적으로 <strong>xxxx_bloc.dart, xxxx_state.dart, xxxx_event.dart</strong>(xxxx는 BLoC 이름) 파일을 생성해야 합니다.</p><p>처음에는 <code class="language-plaintext highlighter-rouge">state</code>부터 살펴보겠습니다.</p><h4 id="package_statedart">package_state.dart<a href="#package_statedart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
</pre><td class="rouge-code"><pre><span class="kn">part of</span> <span class="s">'package_bloc.dart'</span><span class="o">;</span>

<span class="nd">@immutable</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PackageState</span> <span class="kd">extends</span> <span class="n">Equatable</span> <span class="o">{}</span>

<span class="kd">class</span> <span class="nc">Empty</span> <span class="kd">extends</span> <span class="n">PackageState</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="kt">Object</span><span class="o">?&gt;</span> <span class="kd">get</span> <span class="n">props</span> <span class="o">=&gt;</span> <span class="o">[];</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Loading</span> <span class="kd">extends</span> <span class="n">PackageState</span> <span class="o">{</span>
  <span class="nd">@override</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="kt">Object</span><span class="o">?&gt;</span> <span class="kd">get</span> <span class="n">props</span> <span class="o">=&gt;</span> <span class="o">[];</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Loaded</span> <span class="kd">extends</span> <span class="n">PackageState</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">Package</span><span class="o">&gt;</span> <span class="n">packages</span><span class="o">;</span>

  <span class="n">Loaded</span><span class="o">({</span><span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">packages</span><span class="o">});</span>

  <span class="nd">@override</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="kt">Object</span><span class="o">?&gt;</span> <span class="kd">get</span> <span class="n">props</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="n">packages</span><span class="o">];</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">Error</span> <span class="kd">extends</span> <span class="n">PackageState</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="kt">String</span> <span class="n">message</span><span class="o">;</span>

  <span class="n">Error</span><span class="o">({</span><span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">message</span><span class="o">});</span>

  <span class="nd">@override</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="kt">Object</span><span class="o">?&gt;</span> <span class="kd">get</span> <span class="n">props</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="n">message</span><span class="o">];</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">package_event.dart</code>는 패키지를 불러오는 상태를 관리하는 클래스들을 저장합니다.</p><p>일단 모든 클래스의 부모가 되는 <code class="language-plaintext highlighter-rouge">PackageState</code> abstract 클래스를 생성하고 <code class="language-plaintext highlighter-rouge">Equatable</code>을 상속받습니다.</p><p><code class="language-plaintext highlighter-rouge">Equatable</code>가 뭔지 모르시면 <a href="https://petabyte.studio/posts/what-is-equatable/">[Flutter] Equatable, 이렇게 좋은데도 안 써?</a>를 참조해주세요.</p><p>저희는 위에 언급했듯이 4개의 state를 생성할 것입니다.</p><ul><li>패키지가 없고 빈 상태일 때 (Empty)<li>크롤링을 통해서 값을 가져오는 중이라 로딩 중일 때 (Loading)<li>값을 성공적으로 불러왔을 때 (Loaded)<li>값을 불러오던 도중 에러가 발생했을 때 (Error)</ul><p><code class="language-plaintext highlighter-rouge">Loaded</code> 상태에서는 불러온 패키지의 리스트를 가져올 수 있게 하였고, <code class="language-plaintext highlighter-rouge">Error</code>가 발생했으면 에러 메시지를 가지고 올 수 있게 하였습니다.</p><h4 id="package_eventdart">package_event.dart<a href="#package_eventdart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="kn">part of</span> <span class="s">'package_bloc.dart'</span><span class="o">;</span>

<span class="nd">@immutable</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PackageEvent</span> <span class="kd">extends</span> <span class="n">Equatable</span> <span class="o">{}</span>

<span class="kd">class</span> <span class="nc">GetPackageEvent</span> <span class="kd">extends</span> <span class="n">PackageEvent</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">pages</span><span class="o">;</span>

  <span class="n">GetPackageEvent</span><span class="o">({</span>
    <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">pages</span><span class="o">,</span>
  <span class="o">});</span>

  <span class="nd">@override</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="kt">Object</span><span class="o">?&gt;</span> <span class="kd">get</span> <span class="n">props</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="n">pages</span><span class="o">];</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">AppendPackageEvent</span> <span class="kd">extends</span> <span class="n">PackageEvent</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="kt">int</span> <span class="n">pages</span><span class="o">;</span>

  <span class="n">AppendPackageEvent</span><span class="o">({</span>
    <span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">pages</span><span class="o">,</span>
  <span class="o">});</span>

  <span class="nd">@override</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="kt">Object</span><span class="o">?&gt;</span> <span class="kd">get</span> <span class="n">props</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="n">pages</span><span class="o">];</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">package_event.dart</code>역시 <code class="language-plaintext highlighter-rouge">Equatable</code>을 상속받은 PackageEvent를 통해서 두 개의 이벤트를 생성해줍니다.</p><p>이 또한 위에서 언급했듯이 아래 두 기능을 구현하기 위해서 사용하려고 합니다.</p><ul><li>화면이 띄어졌을 때 <code class="language-plaintext highlighter-rouge">pub.dev</code>에 있는 패키지를 불러오기. (GetPackageEvent)<li>FAB을 눌러서 현재 패키지 리스트에다가 값 추가(Append)로 불러오기. (AppendPackageEvent)</ul><h4 id="package_blocdart">package_bloc.dart<a href="#package_blocdart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:bloc/bloc.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:bloc_practice/model/package.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:bloc_practice/repository/package_repository.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:equatable/equatable.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:freezed_annotation/freezed_annotation.dart'</span><span class="o">;</span>

<span class="kn">part</span> <span class="s">'package_event.dart'</span><span class="o">;</span>
<span class="kn">part</span> <span class="s">'package_state.dart'</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">PackageBloc</span> <span class="kd">extends</span> <span class="n">Bloc</span><span class="o">&lt;</span><span class="n">PackageEvent</span><span class="o">,</span> <span class="n">PackageState</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">PackageRepository</span> <span class="n">packageRepository</span><span class="o">;</span>

  <span class="n">PackageBloc</span><span class="o">({</span><span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">packageRepository</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="n">Empty</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">on</span><span class="o">&lt;</span><span class="n">GetPackageEvent</span><span class="o">&gt;(</span><span class="n">_onGetPackageEvent</span><span class="o">);</span>
    <span class="n">on</span><span class="o">&lt;</span><span class="n">AppendPackageEvent</span><span class="o">&gt;(</span><span class="n">_onAppendPackageEvent</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="n">_onGetPackageEvent</span><span class="o">(</span>
      <span class="n">GetPackageEvent</span> <span class="n">event</span><span class="o">,</span> <span class="n">Emitter</span><span class="o">&lt;</span><span class="n">PackageState</span><span class="o">&gt;</span> <span class="n">emit</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">emit</span><span class="o">(</span><span class="n">Loading</span><span class="o">());</span>

      <span class="kd">final</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">await</span> <span class="n">packageRepository</span><span class="o">.</span><span class="na">getPackages</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">pages</span><span class="o">);</span>

      <span class="kd">final</span> <span class="n">packages</span> <span class="o">=</span> <span class="n">resp</span>
          <span class="o">.</span><span class="na">map</span><span class="o">&lt;</span><span class="n">Package</span><span class="o">&gt;(</span>
            <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">Package</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">e</span><span class="o">),</span>
          <span class="o">)</span>
          <span class="o">.</span><span class="na">toList</span><span class="o">();</span>

      <span class="n">emit</span><span class="o">(</span><span class="n">Loaded</span><span class="o">(</span><span class="nl">packages:</span> <span class="n">packages</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">emit</span><span class="o">(</span><span class="n">Error</span><span class="o">(</span><span class="nl">message:</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">()));</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="kt">void</span> <span class="n">_onAppendPackageEvent</span><span class="o">(</span>
      <span class="n">AppendPackageEvent</span> <span class="n">event</span><span class="o">,</span> <span class="n">Emitter</span><span class="o">&lt;</span><span class="n">PackageState</span><span class="o">&gt;</span> <span class="n">emit</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Loaded</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">parsedState</span> <span class="o">=</span> <span class="o">(</span><span class="n">state</span> <span class="k">as</span> <span class="n">Loaded</span><span class="o">);</span>

        <span class="kd">final</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">await</span> <span class="n">packageRepository</span><span class="o">.</span><span class="na">getPackages</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">pages</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">packages</span> <span class="o">=</span> <span class="n">resp</span>
            <span class="o">.</span><span class="na">map</span><span class="o">&lt;</span><span class="n">Package</span><span class="o">&gt;(</span>
              <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">Package</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">e</span><span class="o">),</span>
            <span class="o">)</span>
            <span class="o">.</span><span class="na">toList</span><span class="o">();</span>

        <span class="kd">final</span> <span class="n">prevPackages</span> <span class="o">=</span> <span class="o">[</span>
          <span class="o">...</span><span class="na">parsedState</span><span class="o">.</span><span class="na">packages</span><span class="o">,</span>
        <span class="o">];</span>

        <span class="kd">final</span> <span class="n">newPackages</span> <span class="o">=</span> <span class="o">[</span>
          <span class="o">...</span><span class="na">prevPackages</span><span class="o">,</span>
          <span class="o">...</span><span class="na">packages</span><span class="o">,</span>
        <span class="o">];</span>

        <span class="n">emit</span><span class="o">(</span><span class="n">Loaded</span><span class="o">(</span><span class="nl">packages:</span> <span class="n">newPackages</span><span class="o">));</span>
      <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">emit</span><span class="o">(</span><span class="n">Error</span><span class="o">(</span><span class="nl">message:</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">()));</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>이제 대망의 <code class="language-plaintext highlighter-rouge">BLoC</code> 클래스입니다. 클래스를 하나씩 뜯어보면서 살펴볼까요?</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">PackageBloc</span> <span class="kd">extends</span> <span class="n">Bloc</span><span class="o">&lt;</span><span class="n">PackageEvent</span><span class="o">,</span> <span class="n">PackageState</span><span class="o">&gt;</span> <span class="o">{</span>
</pre></table></code></div></div><p>클래스를 생성할 때 <code class="language-plaintext highlighter-rouge">Bloc&lt;Event 클래스, State 클래스&gt;</code>를 상속 받아줍니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="kd">final</span> <span class="n">PackageRepository</span> <span class="n">packageRepository</span><span class="o">;</span>
</pre></table></code></div></div><p>저희가 아까 만들었던 <code class="language-plaintext highlighter-rouge">pub.dev</code>를 크롤링하는 클래스의 인스턴스를 생성해줍니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>  <span class="n">PackageBloc</span><span class="o">({</span><span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">packageRepository</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="n">Empty</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">on</span><span class="o">&lt;</span><span class="n">GetPackageEvent</span><span class="o">&gt;(</span><span class="n">_onGetPackageEvent</span><span class="o">);</span>
    <span class="n">on</span><span class="o">&lt;</span><span class="n">AppendPackageEvent</span><span class="o">&gt;(</span><span class="n">_onAppendPackageEvent</span><span class="o">);</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>Constructor를 생성해줍니다. 이 떄, <code class="language-plaintext highlighter-rouge">super()</code>에 초기 값을 넣어줘야 하는데 저희는 아무 것도 없는 상태를 넣을 것 이므로 <code class="language-plaintext highlighter-rouge">Empty</code>를 넣어주겠습니다. 또한, packageRepository를 props로 받고 싶으므로 이를 넣어줍니다.</p><p>저희는 아직 이벤트를 받으면 처리하는 부분을 만들지 않았잖아요?</p><p>패키지를 받는 이벤트를 받았으면 이를 처리해주고, 현재 패키지에 새로 받은 패키지를 이어주는 이벤트를 받았으면 이를 처리해주는 로직이 필요한데 아직 저희가 그거를 구현하지 않았거든요.</p><p>이 부분은 <code class="language-plaintext highlighter-rouge">on&lt;GetPackageEvent&gt;();</code>에서 해결이 가능합니다. <code class="language-plaintext highlighter-rouge">on</code>의 기본적인 문법은 아래와 같습니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="n">on</span><span class="o">&lt;</span><span class="n">EventName</span><span class="o">&gt;((</span><span class="n">event</span><span class="o">,</span> <span class="n">emit</span><span class="o">)</span> <span class="o">{</span>
   <span class="c1">// Logic here..</span>
<span class="o">});</span>
</pre></table></code></div></div><p>이 말은 즉슨 익명 함수를 밖으로 꺼내서도 사용할 수 있다는 의미겠죠? 저희는 더 깔끔하게 코드를 보기 위해서 로직 부분을 담당하는 함수를 두 개 생성해주고 함수 이름을 대신 적어주도록 합니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre>  <span class="kt">void</span> <span class="nf">_onGetPackageEvent</span><span class="p">(</span>
      <span class="n">GetPackageEvent</span> <span class="n">event</span><span class="o">,</span> <span class="n">Emitter</span><span class="o">&lt;</span><span class="n">PackageState</span><span class="o">&gt;</span> <span class="n">emit</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">emit</span><span class="o">(</span><span class="n">Loading</span><span class="o">());</span>

      <span class="kd">final</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">await</span> <span class="n">packageRepository</span><span class="o">.</span><span class="na">getPackages</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">pages</span><span class="o">);</span>

      <span class="kd">final</span> <span class="n">packages</span> <span class="o">=</span> <span class="n">resp</span>
          <span class="o">.</span><span class="na">map</span><span class="o">&lt;</span><span class="n">Package</span><span class="o">&gt;(</span>
            <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">Package</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">e</span><span class="o">),</span>
          <span class="o">)</span>
          <span class="o">.</span><span class="na">toList</span><span class="o">();</span>

      <span class="n">emit</span><span class="o">(</span><span class="n">Loaded</span><span class="o">(</span><span class="nl">packages:</span> <span class="n">packages</span><span class="o">));</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">emit</span><span class="o">(</span><span class="n">Error</span><span class="o">(</span><span class="nl">message:</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">()));</span>
    <span class="o">}</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>저희가 꺼낸 로직은 다음과 같습니다.</p><p>함수를 살펴보면 <code class="language-plaintext highlighter-rouge">GetPackageEvent</code>의 event와 <code class="language-plaintext highlighter-rouge">Emitter&lt;PackageState&gt;</code>의 emit을 파라미터로 가지는 것을 확인할 수 있습니다.</p><p><code class="language-plaintext highlighter-rouge">event</code>는 말 그대로 이 함수를 호출한 이벤트를 의미하고 <code class="language-plaintext highlighter-rouge">emit</code>은 하위 위젯에서 상위 위젯으로 이벤트를 전달하기 위한 것입니다.</p><p>간단하게 표현하면 현재 해당 BLoC을 사용중인 위젯에서 받는 <code class="language-plaintext highlighter-rouge">state</code>를 변경하는 부분이라고 하면 되겠네요.</p><p>일단 무지성 try-catch로 에러를 잡아주도록 하겠습니다. 그리고 에러가 발생할 경우 <code class="language-plaintext highlighter-rouge">emit</code>을 통해서 <code class="language-plaintext highlighter-rouge">Error</code> state로 변경하고 message prop에 에러 값을 넣어줍니다.</p><p>그게 아닐 경우, <code class="language-plaintext highlighter-rouge">emit</code>을 통해서 <code class="language-plaintext highlighter-rouge">Loading</code> state로 변경해줍니다.</p><p>로딩 상태에 들어간 이후에는 저희가 아까 만들었던 <code class="language-plaintext highlighter-rouge">packageRepository</code> 오브젝트에서 패키지 리스트를 불러옵니다. 이 때, <code class="language-plaintext highlighter-rouge">event.pages</code> (GetPackageEvent의 멤버)를 통해서 페이지 값을 가져와서 넣어줍니다.</p><p><code class="language-plaintext highlighter-rouge">resp</code>에서 받은 <code class="language-plaintext highlighter-rouge">JSON</code>값을 packages 변수에 넣어주고 <code class="language-plaintext highlighter-rouge">Loaded</code> state로 변경을 해줍니다. 이 때, <code class="language-plaintext highlighter-rouge">package</code> prop에 지금 정보를 갖고 있는 <code class="language-plaintext highlighter-rouge">package</code> 변수를 넣어줍니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre>  <span class="kt">void</span> <span class="nf">_onAppendPackageEvent</span><span class="p">(</span>
      <span class="n">AppendPackageEvent</span> <span class="n">event</span><span class="o">,</span> <span class="n">Emitter</span><span class="o">&lt;</span><span class="n">PackageState</span><span class="o">&gt;</span> <span class="n">emit</span><span class="o">)</span> <span class="n">async</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Loaded</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">final</span> <span class="n">parsedState</span> <span class="o">=</span> <span class="o">(</span><span class="n">state</span> <span class="k">as</span> <span class="n">Loaded</span><span class="o">);</span>

        <span class="kd">final</span> <span class="n">resp</span> <span class="o">=</span> <span class="n">await</span> <span class="n">packageRepository</span><span class="o">.</span><span class="na">getPackages</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">pages</span><span class="o">);</span>
        <span class="kd">final</span> <span class="n">packages</span> <span class="o">=</span> <span class="n">resp</span>
            <span class="o">.</span><span class="na">map</span><span class="o">&lt;</span><span class="n">Package</span><span class="o">&gt;(</span>
              <span class="o">(</span><span class="n">e</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="n">Package</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">e</span><span class="o">),</span>
            <span class="o">)</span>
            <span class="o">.</span><span class="na">toList</span><span class="o">();</span>

        <span class="kd">final</span> <span class="n">prevPackages</span> <span class="o">=</span> <span class="o">[</span>
          <span class="o">...</span><span class="na">parsedState</span><span class="o">.</span><span class="na">packages</span><span class="o">,</span>
        <span class="o">];</span>

        <span class="kd">final</span> <span class="n">newPackages</span> <span class="o">=</span> <span class="o">[</span>
          <span class="o">...</span><span class="na">prevPackages</span><span class="o">,</span>
          <span class="o">...</span><span class="na">packages</span><span class="o">,</span>
        <span class="o">];</span>

        <span class="n">emit</span><span class="o">(</span><span class="n">Loaded</span><span class="o">(</span><span class="nl">packages:</span> <span class="n">newPackages</span><span class="o">));</span>
      <span class="o">}</span>
    <span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">_onAppendPackageEvent</code>도 거의 동일합니다. 하지만, 이는 <code class="language-plaintext highlighter-rouge">state</code>가 <code class="language-plaintext highlighter-rouge">Loaded</code> state 일 때만 동작을 하고, <code class="language-plaintext highlighter-rouge">Loaded</code> state에서 가져온 값과 현재 값을 이어서 다시 넣어주는 방식으로 진행합니다.</p><h3 id="ui">UI<a href="#ui" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><h4 id="maindart">main.dart<a href="#maindart" class="anchor"><i class="fas fa-hashtag"></i></a></h4></h4><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
</pre><td class="rouge-code"><pre><span class="kn">import</span> <span class="s">'package:bloc_practice/bloc/package_bloc.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:bloc_practice/domain/constant/score_value.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:bloc_practice/repository/package_repository.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flutter/material.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'package:flutter_bloc/flutter_bloc.dart'</span><span class="o">;</span>

<span class="kn">import</span> <span class="s">'domain/colors/colors.dart'</span><span class="o">;</span>
<span class="kn">import</span> <span class="s">'model/package.dart'</span><span class="o">;</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">runApp</span><span class="o">(</span><span class="kd">const</span> <span class="n">MyApp</span><span class="o">());</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="kd">const</span> <span class="n">MyApp</span><span class="o">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="c1">// This widget is the root of your application.</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="o">(</span>
      <span class="nl">title:</span> <span class="s">'BLoC Practice'</span><span class="o">,</span>
      <span class="nl">theme:</span> <span class="n">ThemeData</span><span class="o">(</span>
        <span class="nl">primarySwatch:</span> <span class="n">Colors</span><span class="o">.</span><span class="na">blue</span><span class="o">,</span>
      <span class="o">),</span>
      <span class="nl">home:</span> <span class="n">BlocProvider</span><span class="o">(</span>
        <span class="nl">create:</span> <span class="o">(</span><span class="n">context</span><span class="o">)</span> <span class="o">=&gt;</span>
            <span class="n">PackageBloc</span><span class="o">(</span><span class="nl">packageRepository:</span> <span class="n">PackageRepository</span><span class="o">()),</span>
        <span class="nl">child:</span> <span class="kd">const</span> <span class="n">MyHomePage</span><span class="o">(),</span>
      <span class="o">),</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">MyHomePage</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="o">{</span>
  <span class="kd">const</span> <span class="n">MyHomePage</span><span class="o">({</span><span class="n">Key</span><span class="o">?</span> <span class="n">key</span><span class="o">})</span> <span class="o">:</span> <span class="k">super</span><span class="o">(</span><span class="nl">key:</span> <span class="n">key</span><span class="o">);</span>

  <span class="nd">@override</span>
  <span class="n">State</span><span class="o">&lt;</span><span class="n">StatefulWidget</span><span class="o">&gt;</span> <span class="n">createState</span><span class="o">()</span> <span class="o">=&gt;</span> <span class="n">_MyHomePageState</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">_MyHomePageState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">MyHomePage</span><span class="o">&gt;</span> <span class="o">{</span>
  <span class="kt">int</span> <span class="n">pages</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>

  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">initState</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">super</span><span class="o">.</span><span class="na">initState</span><span class="o">();</span>

    <span class="n">BlocProvider</span><span class="o">.</span><span class="na">of</span><span class="o">&lt;</span><span class="n">PackageBloc</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">GetPackageEvent</span><span class="o">(</span><span class="nl">pages:</span> <span class="n">pages</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Scaffold</span><span class="o">(</span>
      <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="o">(</span>
        <span class="nl">title:</span> <span class="kd">const</span> <span class="n">Text</span><span class="o">(</span><span class="s">'BLoC Practice'</span><span class="o">),</span>
      <span class="o">),</span>
      <span class="nl">body:</span> <span class="n">BlocBuilder</span><span class="o">&lt;</span><span class="n">PackageBloc</span><span class="o">,</span> <span class="n">PackageState</span><span class="o">&gt;(</span>
        <span class="nl">builder:</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Empty</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Container</span><span class="o">();</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Loading</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kd">const</span> <span class="n">Center</span><span class="o">(</span>
              <span class="nl">child:</span> <span class="n">CircularProgressIndicator</span><span class="o">(),</span>
            <span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Loaded</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="n">packages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="na">packages</span><span class="o">;</span>

            <span class="k">return</span> <span class="n">ListView</span><span class="o">.</span><span class="na">separated</span><span class="o">(</span>
              <span class="nl">itemCount:</span> <span class="n">packages</span><span class="o">.</span><span class="na">length</span><span class="o">,</span>
              <span class="nl">itemBuilder:</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
                <span class="kd">final</span> <span class="n">package</span> <span class="o">=</span> <span class="n">packages</span><span class="o">[</span><span class="n">index</span><span class="o">];</span>
                <span class="k">return</span> <span class="n">_ListTile</span><span class="o">(</span><span class="nl">package:</span> <span class="n">package</span><span class="o">);</span>
              <span class="o">},</span>
              <span class="nl">separatorBuilder:</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">index</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="kd">const</span> <span class="n">Divider</span><span class="o">(),</span>
            <span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Error</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Text</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
          <span class="o">}</span>

          <span class="k">return</span> <span class="n">Container</span><span class="o">();</span>
        <span class="o">},</span>
      <span class="o">),</span>
      <span class="nl">floatingActionButton:</span> <span class="n">FloatingActionButton</span><span class="o">(</span>
        <span class="nl">child:</span> <span class="kd">const</span> <span class="n">Icon</span><span class="o">(</span><span class="n">Icons</span><span class="o">.</span><span class="na">add</span><span class="o">),</span>
        <span class="nl">onPressed:</span> <span class="o">()</span> <span class="o">{</span>
          <span class="n">context</span><span class="o">.</span><span class="na">read</span><span class="o">&lt;</span><span class="n">PackageBloc</span><span class="o">&gt;().</span><span class="na">add</span><span class="o">(</span>
                <span class="n">AppendPackageEvent</span><span class="o">(</span><span class="nl">pages:</span> <span class="o">++</span><span class="n">pages</span><span class="o">),</span>
              <span class="o">);</span>
        <span class="o">},</span>
      <span class="o">),</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">_ListTile</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="kd">final</span> <span class="n">Package</span> <span class="n">package</span><span class="o">;</span>

  <span class="kd">const</span> <span class="n">_ListTile</span><span class="o">({</span><span class="n">required</span> <span class="k">this</span><span class="o">.</span><span class="na">package</span><span class="o">});</span>

  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Padding</span><span class="o">(</span>
      <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="mf">8.0</span><span class="o">),</span>
      <span class="nl">child:</span> <span class="n">Column</span><span class="o">(</span>
        <span class="nl">crossAxisAlignment:</span> <span class="n">CrossAxisAlignment</span><span class="o">.</span><span class="na">start</span><span class="o">,</span>
        <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;[</span>
          <span class="n">Text</span><span class="o">(</span>
            <span class="n">package</span><span class="o">.</span><span class="na">name</span><span class="o">,</span>
            <span class="nl">style:</span> <span class="kd">const</span> <span class="n">TextStyle</span><span class="o">(</span>
              <span class="nl">fontSize:</span> <span class="mi">18</span><span class="o">,</span>
              <span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryColor</span><span class="o">,</span>
              <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">bold</span><span class="o">,</span>
            <span class="o">),</span>
          <span class="o">),</span>
          <span class="kd">const</span> <span class="n">SizedBox</span><span class="o">(</span><span class="nl">height:</span> <span class="mf">8.0</span><span class="o">),</span>
          <span class="n">Text</span><span class="o">(</span>
            <span class="n">package</span><span class="o">.</span><span class="na">description</span><span class="o">,</span>
            <span class="nl">style:</span> <span class="kd">const</span> <span class="n">TextStyle</span><span class="o">(</span>
              <span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryTextColor</span><span class="o">,</span>
            <span class="o">),</span>
          <span class="o">),</span>
          <span class="kd">const</span> <span class="n">SizedBox</span><span class="o">(</span><span class="nl">height:</span> <span class="mf">8.0</span><span class="o">),</span>
          <span class="n">Row</span><span class="o">(</span>
            <span class="nl">mainAxisAlignment:</span> <span class="n">MainAxisAlignment</span><span class="o">.</span><span class="na">center</span><span class="o">,</span>
            <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;[</span>
              <span class="n">Column</span><span class="o">(</span>
                <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;[</span>
                  <span class="n">Text</span><span class="o">(</span>
                    <span class="n">package</span><span class="o">.</span><span class="na">likes</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span>
                    <span class="nl">style:</span> <span class="kd">const</span> <span class="n">TextStyle</span><span class="o">(</span>
                      <span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryColor</span><span class="o">,</span>
                      <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">bold</span><span class="o">,</span>
                    <span class="o">),</span>
                  <span class="o">),</span>
                  <span class="kd">const</span> <span class="n">Text</span><span class="o">(</span>
                    <span class="n">ScoreValue</span><span class="o">.</span><span class="na">likes</span><span class="o">,</span>
                    <span class="nl">style:</span> <span class="n">TextStyle</span><span class="o">(</span><span class="nl">fontSize:</span> <span class="mi">10</span><span class="o">),</span>
                  <span class="o">),</span>
                <span class="o">],</span>
              <span class="o">),</span>
              <span class="kd">const</span> <span class="n">SizedBox</span><span class="o">(</span><span class="nl">width:</span> <span class="mi">16</span><span class="o">),</span>
              <span class="n">Column</span><span class="o">(</span>
                <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;[</span>
                  <span class="n">Text</span><span class="o">(</span>
                    <span class="n">package</span><span class="o">.</span><span class="na">pubPoints</span><span class="o">.</span><span class="na">toString</span><span class="o">(),</span>
                    <span class="nl">style:</span> <span class="kd">const</span> <span class="n">TextStyle</span><span class="o">(</span>
                      <span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryColor</span><span class="o">,</span>
                      <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">bold</span><span class="o">,</span>
                    <span class="o">),</span>
                  <span class="o">),</span>
                  <span class="kd">const</span> <span class="n">Text</span><span class="o">(</span>
                    <span class="n">ScoreValue</span><span class="o">.</span><span class="na">pubPoints</span><span class="o">,</span>
                    <span class="nl">style:</span> <span class="n">TextStyle</span><span class="o">(</span><span class="nl">fontSize:</span> <span class="mi">10</span><span class="o">),</span>
                  <span class="o">),</span>
                <span class="o">],</span>
              <span class="o">),</span>
              <span class="kd">const</span> <span class="n">SizedBox</span><span class="o">(</span><span class="nl">width:</span> <span class="mi">16</span><span class="o">),</span>
              <span class="n">Column</span><span class="o">(</span>
                <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;[</span>
                  <span class="n">Text</span><span class="o">(</span>
                    <span class="n">package</span><span class="o">.</span><span class="na">popularity</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">'%'</span><span class="o">,</span>
                    <span class="nl">style:</span> <span class="kd">const</span> <span class="n">TextStyle</span><span class="o">(</span>
                      <span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryColor</span><span class="o">,</span>
                      <span class="nl">fontWeight:</span> <span class="n">FontWeight</span><span class="o">.</span><span class="na">bold</span><span class="o">,</span>
                    <span class="o">),</span>
                  <span class="o">),</span>
                  <span class="kd">const</span> <span class="n">Text</span><span class="o">(</span>
                    <span class="n">ScoreValue</span><span class="o">.</span><span class="na">popularity</span><span class="o">,</span>
                    <span class="nl">style:</span> <span class="n">TextStyle</span><span class="o">(</span><span class="nl">fontSize:</span> <span class="mi">10</span><span class="o">),</span>
                  <span class="o">),</span>
                <span class="o">],</span>
              <span class="o">),</span>
            <span class="o">],</span>
          <span class="o">),</span>
          <span class="kd">const</span> <span class="n">SizedBox</span><span class="o">(</span><span class="nl">height:</span> <span class="mf">16.0</span><span class="o">),</span>
          <span class="n">Row</span><span class="o">(</span>
            <span class="nl">mainAxisAlignment:</span> <span class="n">MainAxisAlignment</span><span class="o">.</span><span class="na">spaceBetween</span><span class="o">,</span>
            <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;[</span>
              <span class="n">Text</span><span class="o">(</span>
                <span class="n">package</span><span class="o">.</span><span class="na">version</span><span class="o">,</span>
                <span class="nl">style:</span> <span class="kd">const</span> <span class="n">TextStyle</span><span class="o">(</span>
                  <span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryColor</span><span class="o">,</span>
                  <span class="nl">fontSize:</span> <span class="mi">10</span><span class="o">,</span>
                <span class="o">),</span>
              <span class="o">),</span>
              <span class="n">package</span><span class="o">.</span><span class="na">nullSafety</span>
                  <span class="o">?</span> <span class="n">Container</span><span class="o">(</span>
                      <span class="nl">child:</span> <span class="kd">const</span> <span class="n">Text</span><span class="o">(</span>
                        <span class="s">"Null safety"</span><span class="o">,</span>
                        <span class="nl">style:</span> <span class="n">TextStyle</span><span class="o">(</span>
                          <span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryColor</span><span class="o">,</span>
                          <span class="nl">fontSize:</span> <span class="mi">10</span><span class="o">,</span>
                        <span class="o">),</span>
                      <span class="o">),</span>
                      <span class="nl">margin:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">only</span><span class="o">(</span><span class="nl">left:</span> <span class="mi">8</span><span class="o">),</span>
                      <span class="nl">padding:</span> <span class="kd">const</span> <span class="n">EdgeInsets</span><span class="o">.</span><span class="na">symmetric</span><span class="o">(</span>
                          <span class="nl">horizontal:</span> <span class="mi">8</span><span class="o">,</span> <span class="nl">vertical:</span> <span class="mi">6</span><span class="o">),</span>
                      <span class="nl">decoration:</span> <span class="n">BoxDecoration</span><span class="o">(</span>
                        <span class="nl">borderRadius:</span> <span class="kd">const</span> <span class="n">BorderRadius</span><span class="o">.</span><span class="na">all</span><span class="o">(</span>
                          <span class="n">Radius</span><span class="o">.</span><span class="na">circular</span><span class="o">(</span><span class="mi">20</span><span class="o">),</span>
                        <span class="o">),</span>
                        <span class="nl">border:</span> <span class="n">Border</span><span class="o">.</span><span class="na">all</span><span class="o">(</span><span class="nl">color:</span> <span class="n">ViewColors</span><span class="o">.</span><span class="na">primaryColor</span><span class="o">),</span>
                      <span class="o">),</span>
                    <span class="o">)</span>
                  <span class="o">:</span> <span class="n">Container</span><span class="o">(),</span>
            <span class="o">],</span>
          <span class="o">),</span>
        <span class="o">],</span>
      <span class="o">),</span>
    <span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">_ListTile</code> 클래스는 리스트 타일을 의미하는 클래스이므로 대충 보고 넘겨도 됩니다.</p><p>저희가 중요하게 봐야할 알짜배기들만 모아서 아래에 설명하겠습니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">class</span> <span class="nc">MyApp</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="o">{</span>
  <span class="c1">// More codes here..</span>
  <span class="nd">@override</span>
  <span class="n">Widget</span> <span class="n">build</span><span class="o">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">MaterialApp</span><span class="o">(</span>
      <span class="c1">// More codes here..</span>
      <span class="nl">home:</span> <span class="n">BlocProvider</span><span class="o">(</span>
        <span class="nl">create:</span> <span class="o">(</span><span class="n">context</span><span class="o">)</span> <span class="o">=&gt;</span>
            <span class="n">PackageBloc</span><span class="o">(</span><span class="nl">packageRepository:</span> <span class="n">PackageRepository</span><span class="o">()),</span>
        <span class="nl">child:</span> <span class="kd">const</span> <span class="n">MyHomePage</span><span class="o">(),</span>
      <span class="o">),</span>
  <span class="c1">// More codes here..</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">BLoC</code>을 사용하기 위해서는 <code class="language-plaintext highlighter-rouge">BLoC</code>을 사용하고자 하는 위젯 상단에 <code class="language-plaintext highlighter-rouge">BlocProvider</code>를 넣어줘야 합니다.</p><p>여기서는 사용할 <code class="language-plaintext highlighter-rouge">bloc</code> 클래스를 <code class="language-plaintext highlighter-rouge">create</code>에 정의해줘야하는데 저희는 <code class="language-plaintext highlighter-rouge">PackageBloc</code>으로 하겠습니다.</p><p>이 후, 홈 위젯이 생성이 되면 <code class="language-plaintext highlighter-rouge">event</code>를 호출해줍니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>  <span class="nd">@override</span>
  <span class="kt">void</span> <span class="n">initState</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">super</span><span class="o">.</span><span class="na">initState</span><span class="o">();</span>
    <span class="n">BlocProvider</span><span class="o">.</span><span class="na">of</span><span class="o">&lt;</span><span class="n">PackageBloc</span><span class="o">&gt;(</span><span class="n">context</span><span class="o">).</span><span class="na">add</span><span class="o">(</span><span class="n">GetPackageEvent</span><span class="o">(</span><span class="nl">pages:</span> <span class="n">pages</span><span class="o">));</span>
  <span class="o">}</span>
</pre></table></code></div></div><p>초기 page의 값을 1로 두고 해당 페이지 값을 prop 값으로 넘겨 <code class="language-plaintext highlighter-rouge">GetPackageEvent</code>를 호출해주었습니다.</p><p>이를 처리하기 위해서는 <code class="language-plaintext highlighter-rouge">BlocProvider.of&lt;&gt;().add(Event)</code>를 호출해야 합니다.</p><p>또한, FAB를 누를 때 마다 <code class="language-plaintext highlighter-rouge">AppendPackageEvent</code>를 호출해주기 위해서 이 값을 넣어준 것입니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>      <span class="nl">floatingActionButton:</span> <span class="n">FloatingActionButton</span><span class="o">(</span>
        <span class="nl">child:</span> <span class="kd">const</span> <span class="n">Icon</span><span class="o">(</span><span class="n">Icons</span><span class="o">.</span><span class="na">add</span><span class="o">),</span>
        <span class="nl">onPressed:</span> <span class="o">()</span> <span class="o">{</span>
          <span class="n">context</span><span class="o">.</span><span class="na">read</span><span class="o">&lt;</span><span class="n">PackageBloc</span><span class="o">&gt;().</span><span class="na">add</span><span class="o">(</span>
                <span class="n">AppendPackageEvent</span><span class="o">(</span><span class="nl">pages:</span> <span class="o">++</span><span class="n">pages</span><span class="o">),</span>
              <span class="o">);</span>
        <span class="o">},</span>
      <span class="o">),</span>
</pre></table></code></div></div><p>이제 BLoC State에 따라서 값을 출력해주기만 하면 됩니다.</p><div class="language-dart highlighter-rouge"><div class="code-header"> <span label-text="Dart"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre>      <span class="nl">body:</span> <span class="n">BlocBuilder</span><span class="o">&lt;</span><span class="n">PackageBloc</span><span class="o">,</span> <span class="n">PackageState</span><span class="o">&gt;(</span>
        <span class="nl">builder:</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">state</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Empty</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Container</span><span class="o">();</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Loading</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="kd">const</span> <span class="n">Center</span><span class="o">(</span>
              <span class="nl">child:</span> <span class="n">CircularProgressIndicator</span><span class="o">(),</span>
            <span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Loaded</span><span class="o">)</span> <span class="o">{</span>
            <span class="kd">final</span> <span class="n">packages</span> <span class="o">=</span> <span class="n">state</span><span class="o">.</span><span class="na">packages</span><span class="o">;</span>

            <span class="k">return</span> <span class="n">ListView</span><span class="o">.</span><span class="na">separated</span><span class="o">(</span>
              <span class="nl">itemCount:</span> <span class="n">packages</span><span class="o">.</span><span class="na">length</span><span class="o">,</span>
              <span class="nl">itemBuilder:</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">index</span><span class="o">)</span> <span class="o">{</span>
                <span class="kd">final</span> <span class="n">package</span> <span class="o">=</span> <span class="n">packages</span><span class="o">[</span><span class="n">index</span><span class="o">];</span>
                <span class="k">return</span> <span class="n">_ListTile</span><span class="o">(</span><span class="nl">package:</span> <span class="n">package</span><span class="o">);</span>
              <span class="o">},</span>
              <span class="nl">separatorBuilder:</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">index</span><span class="o">)</span> <span class="o">=&gt;</span> <span class="kd">const</span> <span class="n">Divider</span><span class="o">(),</span>
            <span class="o">);</span>
          <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">state</span> <span class="k">is</span> <span class="n">Error</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">return</span> <span class="n">Text</span><span class="o">(</span><span class="n">state</span><span class="o">.</span><span class="na">message</span><span class="o">);</span>
          <span class="o">}</span>

          <span class="k">return</span> <span class="n">Container</span><span class="o">();</span>
        <span class="o">},</span>
      <span class="o">),</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">BLoCBuilder</code>를 통해서 <code class="language-plaintext highlighter-rouge">state</code>에 따라 값을 출력하려고 합니다.</p><p>저희는 아래와 같이 생성할게요.</p><ul><li><p>state가 <code class="language-plaintext highlighter-rouge">Empty</code>일 경우, 빈 공간 생성</p><li><p>state가 <code class="language-plaintext highlighter-rouge">Loading</code>일 경우, 로딩하는 동글동글한 프로그래스 인디케이터 생성</p><li><p>state가 <code class="language-plaintext highlighter-rouge">Loaded</code>일 경우, <code class="language-plaintext highlighter-rouge">Loaded</code> state의 멤버인 <code class="language-plaintext highlighter-rouge">packages</code>값을 불러와서 그 값을 토대로 리스트를 생성</p><li><p>state가 <code class="language-plaintext highlighter-rouge">Error</code>일 경우 텍스트에 오류 출력</p></ul><p>이게 끝입니다. 생각보다 간단하고 어렵지 않죠?</p><h2 id="conclusion">Conclusion<a href="#conclusion" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><h3 id="완성된-앱의-모습">완성된 앱의 모습<a href="#완성된-앱의-모습" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p><img data-src="/assets/uploads/2022-02-19/3.png" alt="App" data-proofer-ignore></p><h3 id="진짜-끝">진짜 끝<a href="#진짜-끝" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>지금까지 BLoC 패턴을 알아보았습니다. BLoC은 비즈니스 로직과 UI를 나누는 부분에 있어서 좋은 점이 있지만, 이러한 로직마다 최소한 3개의 클래스를 만들어야 하니까 클래스의 개수가 방대하게 늘어날 수 밖에 없는 단점이 있습니다.</p><p>고로 다음에는 BLoC의 보다 간단한 <code class="language-plaintext highlighter-rouge">Provider</code>를 준비해오겠습니다!</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/develop/'>Develop</a>, <a href='/categories/flutter/'>Flutter</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/flutter/" class="post-tag no-text-decoration" >Flutter</a> <a href="/tags/bloc/" class="post-tag no-text-decoration" >BLoC</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글 - dev.appmin&url=https://petabyte.studio/posts/learn-bloc-like-eating-cake/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글 - dev.appmin&u=https://petabyte.studio/posts/learn-bloc-like-eating-cake/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Flutter] BLoC 패턴을 케이크처럼 쉽게 이해할 수 있는 글 - dev.appmin&url=https://petabyte.studio/posts/learn-bloc-like-eating-cake/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/MVVM-in-vanilla-js/">[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기</a><li><a href="/posts/milkdown-the-best-wysiwyg/">[React, JS] 완전 이쁜 WYSIWYG의 희망편, 밀크다운</a><li><a href="/posts/road-to-toss/">[일상] 한 달 간의 2022 토스 NEXT 챌린지 여정</a><li><a href="/posts/SFSU-exchange-program/">[일상] 숭실대학교 SFSU 교환학생 예비 합격</a><li><a href="/posts/make-linux-swap-memory/">[Linux] 리눅스에서 스왑메모리를 생성해주기</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/flutter/">Flutter</a> <a class="post-tag" href="/tags/blockchain/">Blockchain</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/bloc/">BLoC</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/equatable/">Equatable</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/publish-to-pub-dev/"><div class="card-body"> <em class="timeago small" date="2022-01-05 21:00:00 +0900" >Jan 5, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Flutter] 패키지 생성 후 pub.dev에 publish하기</h3><div class="text-muted small"><p> Before Start. Dart Packages vs Flutter Packages. Figure 1 Dart Packages Dart로만 짜여진 일반적인 패키지를 의미합니다. 각 Platform마다 따로 처리를 할 필요가 없으면 다트 패키지로 만드는 것 같습니다. Plugin Packages ...</p></div></div></a></div><div class="card"> <a href="/posts/flutter-get-size-of-widget/"><div class="card-body"> <em class="timeago small" date="2022-01-18 23:49:00 +0900" >Jan 18, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Flutter] 위젯의 크기 / 위치 값을 가져오는 법</h3><div class="text-muted small"><p> Before Start. 위젯의 크기 및 위치를 얻는 방법들 LayoutBuilder Global Key 및 RenderBox를 활용 MeasuredSize 이번 포스트에서는 Global Key를 통해서 구하는 방법을 알아보겠습니다. Getting Started. 기본 코드 class MyHomePage extends Stat...</p></div></div></a></div><div class="card"> <a href="/posts/what-is-equatable/"><div class="card-body"> <em class="timeago small" date="2022-02-07 21:12:00 +0900" >Feb 7, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Flutter] Equatable, 이렇게 좋은데도 안 써?</h3><div class="text-muted small"><p> Before Start. Equatable 패키지를 어쩌다 알게 되었나 BLoC 아키텍처 패턴을 공부하기 위해서 다른 개발자 분들의 코드를 살펴보던 중, 많은 분들이 state, event 클래스를 생성할 때 Equatable 클래스를 상속받는 것을 보고 처음에는 아는 것 없이 무지성으로 저도 Equatable을 상속받아서 생성 했었습니다. 하지...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/what-is-equatable/" class="btn btn-outline-primary" prompt="Older"><p>[Flutter] Equatable, 이렇게 좋은데도 안 써?</p></a> <a href="/posts/how-to-override-vim-command/" class="btn btn-outline-primary" prompt="Newer"><p>[Vim] Vim 키 매핑으로 단축키 만들어보기</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/devappmin">Kim Seung Hwan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/flutter/">Flutter</a> <a class="post-tag" href="/tags/blockchain/">Blockchain</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/bloc/">BLoC</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/equatable/">Equatable</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Y587JMG8MZ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Y587JMG8MZ'); }); </script>
