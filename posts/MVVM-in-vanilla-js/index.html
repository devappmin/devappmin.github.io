<!DOCTYPE html><html lang="ko" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="day-prompt" content="days ago"><meta name="hour-prompt" content="hours ago"><meta name="minute-prompt" content="minutes ago"><meta name="justnow-prompt" content="just now"><meta name="generator" content="Jekyll v4.2.1" /><meta property="og:title" content="[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기" /><meta property="og:locale" content="ko" /><meta name="description" content="🛫 시작하기에 앞서" /><meta property="og:description" content="🛫 시작하기에 앞서" /><link rel="canonical" href="https://petabyte.studio/posts/MVVM-in-vanilla-js/" /><meta property="og:url" content="https://petabyte.studio/posts/MVVM-in-vanilla-js/" /><meta property="og:site_name" content="dev.appmin" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-01-13T21:55:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기" /><meta name="twitter:site" content="@twitter_username" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"headline":"[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기","dateModified":"2023-01-13T22:22:56+09:00","datePublished":"2023-01-13T21:55:00+09:00","description":"🛫 시작하기에 앞서","url":"https://petabyte.studio/posts/MVVM-in-vanilla-js/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://petabyte.studio/posts/MVVM-in-vanilla-js/"},"@context":"https://schema.org"}</script><title>[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기 | dev.appmin</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="dev.appmin"><meta name="application-name" content="dev.appmin"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1.1.0/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end" lang="en"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/4322099?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">dev.appmin</a></div><div class="site-subtitle font-italic">응애 개발자</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/devappmin" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dev.appmin','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기</h1><div class="post-meta text-muted"><div> By <em> <a href="https://github.com/devappmin">Kim Seung Hwan</a> </em></div><div class="d-flex"><div> <span> Posted <em class="timeago" date="2023-01-13 21:55:00 +0900" data-toggle="tooltip" data-placement="bottom" title="Fri, Jan 13, 2023, 9:55 PM +0900" >Jan 13</em> </span> <span> Updated <em class="timeago" date="2023-01-13 22:22:56 +0900 " data-toggle="tooltip" data-placement="bottom" title="Fri, Jan 13, 2023, 10:22 PM +0900" >Jan 13</em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2313 words"> <em>12 min</em> read</span></div></div></div><div class="post-content"><h1 id="-시작하기에-앞서">🛫 시작하기에 앞서</h1><p><img data-src="/uploads/vanilla-js-thumbnail.png" alt="Vanilla JS Thumbnail" data-proofer-ignore></p><p>간단한 바닐라 자바스크립트 프로젝트를 진행하면서 바닐라 자바스크립트에서의 <strong>MVVM + Repository</strong> 패턴을 학습한 내용을 기록하려고 합니다.</p><h2 id="-왜-하필-mvvm">🤔 왜 하필 MVVM?<a href="#-왜-하필-mvvm" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>처음에는 안드로이드를 개발하면 많이 사용하는 <strong>AAC-MVVM</strong>(AAC-ViewModel을 활용한 MVVM) 패턴에 익숙해서 바닐라 자바스크립트 역시 MVVM으로 개발을 시작하였습니다. 하지만, AAC-MVVM과 Pure MVVM에는 차이가 있었고 Pure MVVM을 개발해본 적이 없어 AAC-ViewModel과 일반 ViewModel의 차이를 또한 공부해보고 싶어 본 프로젝트를 진행하였습니다!</p><h2 id="-aac-viewmodel-vs-mvvm-viewmodel">🤨 AAC ViewModel vs MVVM ViewModel<a href="#-aac-viewmodel-vs-mvvm-viewmodel" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>일단 AAC의 ViewModel과 MVVM의 ViewModel은 이름만 같을 뿐 완전히 다른 ViewModel입니다. 하지만, AAC ViewModel을 활용해서 MVVM을 구현할 수도 있기 때문에 AAC ViewModel을 쓰면 MVVM이 아니라고 할 수도 없습니다!</p><h3 id="aac-viewmodel">AAC ViewModel<a href="#aac-viewmodel" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><blockquote><p>ViewModel의 대안은 UI에 표시되는 데이터를 보유하는 일반 클래스입니다. 이는 활동이나 탐색 대상 간에 이동할 때 문제가 될 수 있습니다. 이렇게 하면 <a href="https://developer.android.com/topic/libraries/architecture/saving-states#onsaveinstancestate">인스턴스 상태 저장 메커니즘</a>을 사용하여 데이터를 저장하지 않을 경우 해당 데이터가 소멸됩니다. ViewModel은 데이터 지속성을 위한 편리한 API를 제공하여 이 문제를 해결합니다.</p><p>ViewModel 클래스의 주요 이점은 기본적으로 두 가지입니다.</p><ul><li>UI 상태를 유지할 수 있습니다.<li>비즈니스 로직에 대한 액세스 권한을 제공합니다.</ul><p><a href="https://developer.android.com/topic/libraries/architecture/viewmodel">ViewModel 개요</a></p></blockquote><p>Google 공식 문서를 확인해보면 알 수 있듯이, MVVM 패턴에 대한 설명 없이 AAC(Android Architecture Component)의 ViewModel 만을 알려주는 것을 알 수 있습니다.</p><p>AAC ViewModel은 Android의 수명 주기를 고려할 때 UI와 관련된 데이터들을 저장하고 관리하는 것을 목적으로 설계되었습니다. 즉, 데이터를 관리하고 바인딩하고 정제하기 위해 사용하는 ViewModel이 아닌 화면이 회전했을 때와 같이 상태가 변화 했을 때도 데이터 라이프 사이클을 관리하고 유지하는 데에 사용됩니다.</p><p><img data-src="/uploads/viewmodel-lifecycle.png" alt="AAC ViewModel Lifecycle" data-proofer-ignore></p><h3 id="mvvm-viewmodel">MVVM ViewModel<a href="#mvvm-viewmodel" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><p>MVVM ViewModel은 View와 Model 사이에서 데이터를 관리, 정제 및 바인딩을 하기 위한 클래스로, 값이 변경이 됐을 때 그 상태 변화를 View에게 전달하는 작업을 합니다.</p><p>MVVM에서 View와 ViewModel의 관계는 연결 상태를 최소화하고 ViewModel은 데이터가 변한 것을 View에 전달하고 View에서는 화면 정보의 변화를 ViewModel에 전달해야 합니다.</p><h1 id="-mvvm--repository-개발하기">🫠 MVVM + Repository 개발하기</h1><h2 id="️-폴더-구조">🗂️ 폴더 구조<a href="#️-폴더-구조" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
</pre><td class="rouge-code"><pre>.
├── app.js
├── js
│   ├── abstract
│   │   ├── binder.js
│   │   ├── model.js
│   │   └── view.js
│   ├── binder
│   │   └── sub-binder.js
│   ├── config
│   │   └── *
│   ├── constant
│   │   └── *
│   ├── error
│   │   └── *
│   ├── model
│   │   └── sub-model.js
│   ├── repository
│   │   └── repository.js
│   ├── ui
│   │   └── *
│   ├── util
│   │   └── type-check.js
│   ├── view
│   │   └── sub-view.js
│   └── viewmodel
│       └── sub-view-model.js
├── scss
│   └── styles.scss
└── views
    └── index.html
</pre></table></code></div></div><ul><li><strong>abstract</strong>: binder, model, view로 사용하기 위한 추상 클래스를 모아둔 폴더<li><strong>binder</strong>: <strong>AddEventListener</strong> 등 이벤트 바인딩을 위한 클래스를 모아둔 폴더<li><strong>config</strong>: Fetch 등을 통해 네트워크에 요청을 할 때 사용할 config 들을 모아둔 폴더<li><strong>constant</strong>: 상수들을 모아둔 폴더<li><strong>error</strong>: <strong>Error</strong>를 상속받은 클래스를 모아둔 폴더<li><strong>model</strong>: 모델 클래스를 모아둔 폴더<li><strong>repository</strong>: 데이터 통신을 통해 가져온 데이터들을 저장하는 클래스를 모아둔 폴더<li><strong>ui</strong>: UI 변경 (ProgressBar, Alert 등)을 사용하는 클래스를 모아둔 폴더<li><strong>util</strong>: 유틸리티 클래스를 모아둔 폴더<li><strong>view</strong>: 뷰 클래스를 모아둔 폴더<li><strong>viewmodel</strong>: 뷰모델 클래스를 모아둔 폴더</ul><h2 id="-mvvm--repository-로직">🐛 MVVM + Repository 로직<a href="#-mvvm--repository-로직" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p><img data-src="/uploads/MVVM-Vanilla.png" alt="MVVM Vanilla" data-proofer-ignore></p><p>대부분의 프로세스는 다음과 같습니다.</p><ol><li>Binder를 통해서 이벤트가 들어온 것을 확인합니다.<li>들어온 이벤트를 기반으로 적절한 ViewModel의 메소드를 실행시킵니다.<li>네트워크 요청이 필요한 이벤트일 경우, ViewModel에서는 Repository에서 데이터를 가져오도록 합니다.<li>Repository에서는 Model에 맞게 데이터를 불러온 뒤에 값을 ViewModel에 전달합니다.<li>ViewModel에서는 Repository에서 받은 데이터를 적절히 가공하여 저장합니다.<li>View에서는 ViewModel의 가공된 데이터를 기준으로 화면에 출력합니다.</ol><h2 id="️-코드">🛠️ 코드<a href="#️-코드" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><p>간단한 자바스크립트 코드를 보면서 로직을 파악해보도록 하겠습니다.</p><h3 id="binder">Binder<a href="#binder" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1">// binder.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Binder</span> <span class="p">{</span>
	<span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kd">constructor</span> <span class="o">===</span> <span class="nx">Binder</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Abstract Error</span><span class="dl">'</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="nx">bindEvents</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Abstract Error</span><span class="dl">'</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Binder는 <code class="language-plaintext highlighter-rouge">BindEvents()</code> 추상 메서드를 가지고 있는 추상 클래스입니다. Binder를 상속받은 클래스를 사용해서 유저는 이벤트를 바인딩 할 수 있습니다.</p><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="c1">// sub-binder.js</span>

<span class="kd">class</span> <span class="nx">SubBinder</span> <span class="kd">extends</span> <span class="nx">Binder</span> <span class="p">{</span>
	<span class="nx">bindEvents</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="nx">tempEl</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-temp-button</span><span class="dl">'</span><span class="p">);</span>
		<span class="kd">const</span> <span class="nx">subViewModel</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SubViewModel</span><span class="p">();</span>
		<span class="kd">const</span> <span class="nx">subView</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">SubView</span><span class="p">(</span><span class="nx">subViewModel</span><span class="p">);</span>
		
		<span class="nx">tempEl</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="dl">'</span><span class="s1">click</span><span class="dl">'</span><span class="p">,</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>	
			<span class="k">await</span> <span class="nx">subViewModel</span><span class="p">.</span><span class="nx">action</span><span class="p">();</span>
			<span class="nx">subView</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
		<span class="p">});</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="k">new</span> <span class="nx">SubBinder</span><span class="p">();</span>
</pre></table></code></div></div><p>간단한 예를 살펴보면 이벤트가 일어났을 때 ViewModel을 통해 데이터를 가공하고 View를 통해 렌더링을 하게 하였습니다.</p><h3 id="view">View<a href="#view" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c1">// view.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">View</span> <span class="p">{</span>
	<span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kd">constructor</span> <span class="o">===</span> <span class="nx">View</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Abstract Error</span><span class="dl">'</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Abstract Error</span><span class="dl">'</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>View도 Binder와 동일하게 추상클래스로 만들어주었습니다. 자식 클래스들은 View를 상속받고 ViewModel의 데이터 가공이 끝났을 때 render()를 호출하여 화면을 업데이트 해줍니다.</p><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1">// sub-view.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">SubView</span> <span class="kd">extends</span> <span class="nx">View</span> <span class="p">{</span>
	<span class="err">#</span><span class="nx">subViewModel</span><span class="p">;</span>
	
	<span class="kd">constructor</span><span class="p">(</span><span class="nx">subViewModel</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">super</span><span class="p">();</span>
		<span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">subViewModel</span> <span class="o">=</span> <span class="nx">subViewModel</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="p">{</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">age</span> <span class="p">}</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">subViewModel</span><span class="p">.</span><span class="nx">getUser</span><span class="p">();</span>
		
		<span class="kd">const</span> <span class="nx">nameEl</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-name</span><span class="dl">'</span><span class="p">);</span>
		<span class="kd">const</span> <span class="nx">ageEl</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">'</span><span class="s1">.my-age</span><span class="dl">'</span><span class="p">);</span>
		
		<span class="nx">nameEl</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
		<span class="nx">ageEl</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">ageEl</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>말 그대로 View에서는 ViewModel에서 가공된 데이터를 렌더링할 수 있습니다. <code class="language-plaintext highlighter-rouge">render()</code>는 Binder에서 모든 일이 끝난 뒤에 마지막에서 호출되기 때문에 업데이트된 데이터를 가지고 있어 새로운 데이터를 뿌릴 수 있습니다.</p><h3 id="viewmodel">ViewModel<a href="#viewmodel" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">// sub-view-model.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">SubViewModel</span> <span class="p">{</span>
	<span class="err">#</span><span class="nx">subModel</span><span class="p">;</span>
	<span class="err">#</span><span class="nx">repository</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Repository</span><span class="p">();</span>
	
	<span class="nx">getUser</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">subModel</span><span class="p">.</span><span class="nx">getData</span><span class="p">();</span>
	<span class="p">}</span>
	
	<span class="k">async</span> <span class="nx">action</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">subModel</span> <span class="o">=</span> <span class="k">await</span> <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">repository</span><span class="p">.</span><span class="nx">fetchData</span><span class="p">();</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>ViewModel은 그 범위가 달라 추상클래스 없이 개발을 진행하였습니다. 여기서는 알맞게 Model을 기준으로 데이터를 가공하거나 불러오는 작업을 합니다.</p><h3 id="repository">Repository<a href="#repository" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">// repository.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Repository</span> <span class="p">{</span>
	<span class="k">async</span> <span class="nx">fetchData</span><span class="p">()</span> <span class="p">{</span>
		<span class="kd">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">fetch</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://dummyjson.com/user/1</span><span class="dl">'</span><span class="p">);</span>
		
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">res</span><span class="p">.</span><span class="nx">ok</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Fetch Error</span><span class="dl">'</span><span class="p">);</span>
		
		<span class="k">return</span> <span class="k">new</span> <span class="nx">SubModel</span><span class="p">(</span><span class="nx">res</span><span class="p">.</span><span class="nx">json</span><span class="p">());</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Repository에서는 데이터를 가져오는 작업을 합니다. 여기서 리턴하는 데이터는 특정 Model을 기반으로 합니다.</p><h3 id="model">Model<a href="#model" class="anchor"><i class="fas fa-hashtag"></i></a></h3></h3><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="c1">// model.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">Model</span> <span class="p">{</span>
	<span class="kd">constructor</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="kd">constructor</span> <span class="o">===</span> <span class="nx">Model</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Abstract Error</span><span class="dl">'</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">}</span>

	<span class="nx">setData</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Abstract Error</span><span class="dl">'</span><span class="p">);</span>
	<span class="p">}</span>
	
	<span class="nx">getData</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">'</span><span class="s1">Abstract Error</span><span class="dl">'</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>Model은 위와 같은 추상클래스를 만들어서 진행하였습니다. 물론 굳이 <code class="language-plaintext highlighter-rouge">setData()</code>, <code class="language-plaintext highlighter-rouge">getData()</code>를 추상 메서드로 만들 필요도, 꼭 이런 방식으로 Model을 개발하지 않아도 되나 이번 프로젝트를 진행하면서는 위와 같이 모델을 제작하였습니다.</p><div class="language-js highlighter-rouge"><div class="code-header"> <span label-text="JavaScript"><i class="fas fa-code small"></i></span> <button aria-label="copy" title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1">// sub-model.js</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">SubModel</span> <span class="kd">extends</span> <span class="nx">Model</span> <span class="p">{</span>
	<span class="err">#</span><span class="nx">data</span><span class="p">;</span>

	<span class="kd">constructor</span><span class="p">(</span><span class="nx">data</span><span class="p">})</span> <span class="p">{</span>
		<span class="k">super</span><span class="p">();</span>
		<span class="err">#</span><span class="k">this</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">;</span>
	<span class="p">}</span>
	
	<span class="nx">setData</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">data</span> <span class="o">=</span> <span class="p">{</span>
			<span class="p">...</span><span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">data</span>
			<span class="p">...</span><span class="nx">data</span><span class="p">,</span>
		<span class="p">}</span>
	<span class="p">}</span>
	
	<span class="nx">getData</span><span class="p">()</span> <span class="p">{</span>
		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="err">#</span><span class="nx">data</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></table></code></div></div><p>그냥 간단하게 데이터를 불러오고 저장할 수 있도록 하였습니다.</p><p>이와 같이 로직을 분리하여 간단한 바닐라 자바스크립트 MVVM 패턴을 사용할 수 있습니다..!</p><h1 id="-결론">🙂 결론</h1><p>간단하게 MVVM을 활용해서 개발을 해봤는데요! 사실 간단한 작업은 위와 같은 Role로도 작동이 되지만 더 큰 규모의 프로젝트가 되기 위해서는 Role Design을 더욱 상세하고 정밀하게 짜야할 것 같네요!</p><h2 id="참조">참조<a href="#참조" class="anchor"><i class="fas fa-hashtag"></i></a></h2></h2><ul><li><a href="https://happyjy.netlify.app/%EA%B0%9D%EC%B2%B4%EC%A7%80%ED%96%A5-%EC%9E%90%EB%B0%94%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-2%ED%9A%8C%EC%B0%A8mvvm-%EA%B5%AC%ED%98%84">객체지향 자바스크립트 2회차(MVVM 구현) , jyoon blog version2 (happyjy.netlify.app)</a><li><a href="https://junilhwang.github.io/TIL/CodeSpitz/Object-Oriented-Javascript/02-MVVM/">MVVM System 만들기 , 개발자 황준일 (junilhwang.github.io)</a><li><a href="https://developer.android.com/topic/libraries/architecture/viewmodel">ViewModel 개요 ,  Android 개발자 ,  Android Developers</a></ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/develop/'>Develop</a>, <a href='/categories/javascript/'>Javascript</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >Javascript</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기 - dev.appmin&url=https://petabyte.studio/posts/MVVM-in-vanilla-js/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기 - dev.appmin&u=https://petabyte.studio/posts/MVVM-in-vanilla-js/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기 - dev.appmin&url=https://petabyte.studio/posts/MVVM-in-vanilla-js/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recent Update</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/MVVM-in-vanilla-js/">[JS] 바닐라 JS에서 정말 간단한 MVVM + Repository 패턴 사용하기</a><li><a href="/posts/milkdown-the-best-wysiwyg/">[React, JS] 완전 이쁜 WYSIWYG의 희망편, 밀크다운</a><li><a href="/posts/road-to-toss/">[일상] 한 달 간의 2022 토스 NEXT 챌린지 여정</a><li><a href="/posts/SFSU-exchange-program/">[일상] 숭실대학교 SFSU 교환학생 예비 합격</a><li><a href="/posts/make-linux-swap-memory/">[Linux] 리눅스에서 스왑메모리를 생성해주기</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/flutter/">Flutter</a> <a class="post-tag" href="/tags/blockchain/">Blockchain</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/bloc/">BLoC</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/equatable/">Equatable</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/milkdown-the-best-wysiwyg/"><div class="card-body"> <em class="timeago small" date="2022-07-02 22:01:00 +0900" >Jul 2, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[React, JS] 완전 이쁜 WYSIWYG의 희망편, 밀크다운</h3><div class="text-muted small"><p> 🛫 시작하기에 앞서 🙃 밀크다운이라고 들어봤어? 밀크다운(Milkdown)은 Typora에 영감을 받아서 제작된 WYSIWYG(What You See Is What You Get) 마크다운(Markdown) 에디터입니다. Prosemirror와 Remark를 기반으로 제작되었습니다. 기본 디자인이 Material 디자인과 Nord 테마로 적용...</p></div></div></a></div><div class="card"> <a href="/posts/save-screenshot-by-webdriver/"><div class="card-body"> <em class="timeago small" date="2022-05-17 15:43:00 +0900" >May 17, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Python] Selenium으로 원하는 웹사이트 스크린샷 찍기</h3><div class="text-muted small"><p> 시작하기에 앞서 최근에 프로젝트를 진행하면서 웹사이트의 특정 노트, 혹은 웹사이트 전체를 스크린샷을 찍어 저장해야 하는 상황이 생겼습니다. 파이썬으로 웹사이트를 캡쳐하는 방법은 다양하나, 저는 이번에 Selenium을 활용하여 스크린샷을 찍는 방법을 택하였습니다. Selenium 설치 및 Chromedriver 다운로드 이 부분은 Seleni...</p></div></div></a></div><div class="card"> <a href="/posts/react-image-slider/"><div class="card-body"> <em class="timeago small" date="2022-06-03 19:09:00 +0900" >Jun 3, 2022</em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[React] CSS 애니메이션 없이 움직이는 이미지 슬라이더 만들기</h3><div class="text-muted small"><p> 시작하기에 앞서 예전부터 즐겨보는 유튜브 채널 중에 devaslife라는 유튜버가 있습니다. VIM으로 풀스택 개발을 하는 동영상을 주로 올리는데 최근에 봤던 How I built a software agency wesite with Next.js + Tailwind CSS (in nature)에서 CSS 애니메이션 없이 자바스크립트 만으로 이미...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/road-to-kakao/" class="btn btn-outline-primary" prompt="Older"><p>[일상] 2023 카카오 블라인드 공채 후기</p></a> <span class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></span></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/devappmin">Kim Seung Hwan</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/diary/">Diary</a> <a class="post-tag" href="/tags/flutter/">Flutter</a> <a class="post-tag" href="/tags/blockchain/">Blockchain</a> <a class="post-tag" href="/tags/git/">Git</a> <a class="post-tag" href="/tags/javascript/">Javascript</a> <a class="post-tag" href="/tags/python/">Python</a> <a class="post-tag" href="/tags/react/">React</a> <a class="post-tag" href="/tags/bloc/">BLoC</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/equatable/">Equatable</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/lozad/dist/lozad.min.js,npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.16.1,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-Y587JMG8MZ"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-Y587JMG8MZ'); }); </script>
